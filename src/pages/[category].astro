---
import Layout from "../layouts/Layout.astro";
import { collection, query, getDocs, where } from "firebase/firestore";
import { firestore } from "../firebase.config";
import type { Tool } from "../models/tool.model";
import Grid from "../components/Grid.astro";

export function getStaticPaths() {
  return [
    { params: { category: "icons" } },
    { params: { category: "fonts" } },
    { params: { category: "illustrations" } },
    { params: { category: "colors" } },
    { params: { category: "libraries" } },
    { params: { category: "generators" } },
    { params: { category: "other" } },
  ];
}
const { category } = Astro.params;

const tools: Tool[] = [];

const q = query(
  collection(firestore, "tools"),
  where("category", "==", category),
);
const qs = await getDocs(q);
qs.forEach((doc) => {
  tools.push(doc.data() as Tool);
});
---

<Layout
  title={category !== "other"
    ? `Web Dev ${category?.charAt(0).toUpperCase()}${category?.slice(1)}`
    : "Other Web Dev Tools"}
>
  <Grid tools={tools} />
</Layout>
