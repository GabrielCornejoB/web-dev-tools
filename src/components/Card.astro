---
import type { Tool } from "../models/tool.model";

interface Props {
  tool: Tool;
}

const { tool } = Astro.props;
const { description, imageURL, name, author, category, tags, url } = tool;

const getColorFromCategory = () => {
  switch (category) {
    case "icons":
      return "bg-rose-500";
    case "illustrations":
      return "bg-green-500";
    case "react":
      return "bg-sky-500";
    case "colors":
      return "bg-indigo-500";
    case "generators":
      return "bg-orange-500";
    case "fonts":
      return "bg-slate-500";
    case "libraries":
      return "bg-yellow-500";
  }
};
const color = getColorFromCategory();
---

<a
  href={url}
  target="_blank"
  class:list={[
    "group relative mx-3 my-[6px] flex w-72 cursor-pointer flex-col rounded-2xl bg-white transition-colors hover:bg-slate-100",
    `${
      description.length <= 35
        ? "row-end-sm"
        : description.length <= 75
        ? "row-end-md"
        : "row-end-lg"
    }`,
  ]}
>
  {
    imageURL && (
      <img
        src={imageURL}
        alt={name}
        width="56"
        height="56"
        class="absolute left-4 top-4 rounded-2xl border-4 border-white transition-colors group-hover:border-slate-100"
      />
    )
  }
  <div class={`h-12 w-full rounded-t-xl ${color}`}></div>

  <div
    class:list={[
      "flex grow flex-col justify-between p-4",
      `${imageURL ? "pt-6" : "pt-3"}`,
    ]}
  >
    <div>
      <h3 class="text-xl font-bold text-black">{name}</h3>
      <p class="text-sm font-medium leading-3 text-gray-400">
        @{author}
      </p>
    </div>
    <p class="hyphens-auto text-sm font-normal text-black">{description}</p>

    <!-- TODO: Make it a slider with infinite loop on hover, or add a new height & wrap the tags -->
    <div class="flex flex-row gap-1 overflow-hidden whitespace-nowrap">
      {
        tags.map((tag) => (
          <div class="grid place-items-center rounded-lg bg-gray-300 px-2 py-[2px] text-xs font-medium text-gray-500">
            <span>{tag}</span>
          </div>
        ))
      }
    </div>
  </div>
</a>
